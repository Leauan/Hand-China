<?xml version="1.0" encoding="UTF-8"?>
<a:service xmlns:ns1="aurora.application.action" xmlns:s="aurora.plugin.script" xmlns:a="http://www.aurora-framework.org/application" xmlns:p="uncertain.proc" trace="true">
    <a:init-procedure>
        <s:server-script import="yonda_itfc_config/kingdee_journal_config.js"><![CDATA[
            function kinddee_itfc() {
                importPackage(Packages.java.io);
                importPackage(Packages.java.util);
                importPackage(Packages._214._64._235._180.ormrpc.services.EASLogin);
                var journal_header_id;
                var EASLogin_address = "http://180.235.64.214:7888/ormrpc/services/EASLogin";
                var proxy = new EASLoginProxyProxy(EASLogin_address);
                var ctx = proxy.login("7447", "19971027LIU", "eas", "YD", "l2", 1);
                 println(ctx.getSessionId());
                 var kinddee_itfc = new KingdeeItfc($instance('aurora.database.service.IDatabaseServiceFactory'), $instance('uncertain.ocm.IObjectRegistry'), $ctx.getData());
                 var children = $ctx.parameter.getChildren();
                // println(children.length);
                 for (var i = 0;i < children.length;i++) {
                     journal_header_id = children[i].journal_id;
                    kinddee_itfc.transfer_ref_data(journal_header_id);
                     //kinddee_itfc.transfer_ref("BP","YD20150100019","上海中畅信息科技有限公司的合同","C15000044","上海中畅信息科技有限公司","A00006","上海永达汽车浦东销售服务有限公司","YD.QC.97.01");
                 }
           
            }
            
            kinddee_itfc();
        ]]></s:server-script>
    </a:init-procedure>
    <a:service-output output="/parameter"/>
</a:service>
