<?xml version="1.0" encoding="UTF-8"?>
<bm:model xmlns:bm="http://www.aurora-framework.org/schema/bm">
    <bm:operations>
        <bm:operation name="query">
            <bm:query-sql><![CDATA[select rownum sequence,
    cc.contract_number,
    pp.project_number project_name,
    ca.cf_item_name,
    (select bm.bp_name from hls_bp_master bm where bm.bp_id= cc.bp_id_tenant) bp_name,
    ca.due_date,
    cwo.*,
    ca.cashflow_id,
    ca.due_amount,
    ca.principal,
    ca.interest,
    ca.times,
    ca.received_amount,
    ca.received_principal,
    ca.received_interest,
    ca.penalty,
    ca.penalty_cashflow_id,
    ca.unreceived_amount,
    ca.unreceived_principal,
    ca.unreceived_interest,
    ca.bp_id_tenant bp_id,
    ca.write_off_order,
    ca.write_off_order100,
    ca.write_off_order101,
    ca.cf_item,
    ca.cf_type
  from csh_write_off_temp_wfl cwo,con_contract cc,prj_project pp,CON_CONTRACT_CASHFLOW_V ca
 where cwo.wfl_instance_id = ${@instance_id}
   and cwo.write_off_type ='RECEIPT_CREDIT'
   and cwo.document_id = cc.contract_id
   and cc.project_id=pp.project_id
   and cwo.document_line_id = ca.cashflow_id]]></bm:query-sql>
            <bm:parameters>
                <bm:parameter name="instance_id"/>
            </bm:parameters>
        </bm:operation>
        <bm:operation name="delete">
            <bm:update-sql><![CDATA[
        		delete from csh_write_off_temp_wfl  cwo where cwo.temp_id = ${@temp_id}
        	]]></bm:update-sql>
        </bm:operation>
    </bm:operations>
</bm:model>
