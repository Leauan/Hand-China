<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: DJ  
    $Date: 2013-4-17 下午3:35:38  
    $Revision: 1.0  
    $Purpose: 
-->
<ns1:model xmlns:ns1="http://www.aurora-framework.org/schema/bm" alias="t1" extend="hls.HLS050.hls_price_list" extendMode="reference" needAccessControl="false">
    <ns1:fields>
        <ns1:field name="price_list" displayWidth="180" forDisplay="true" forQuery="true"/>
        <ns1:field name="description" displayWidth="250" forDisplay="true" forQuery="true"/>
        <ns1:field name="calc_method"/>
        <ns1:field name="authority_group"/>
    </ns1:fields>
    <ns1:query-fields>
        <ns1:query-field field="price_list" queryOperator="like"/>
        <ns1:query-field field="description" queryOperator="like"/>
        <ns1:query-field field="authority_group" queryOperator="="/>
    </ns1:query-fields>
    <ns1:data-filters>
        <ns1:data-filter name="company_id" enforceOperations="query" expression="exists (select 1           from hls_price_list_assign t          where t.price_list = t1.price_list            and t.company_id = ${/session/@company_id}) and exists (select 1                     from hls_price_list_conds_lease b,                          exp_org_unit_vl            t1,                          exp_emp_assign_e_v         t2                    where b.price_list = t1.price_list                                         and t2.user_id = ${/session/@user_id}                      and t1.UNIT_ID = t2.unit_id                      and (t1.yonda_organization_code = b.lease_organization or                          b.lease_org_unit = t2.unit_id))"/>
        <ns1:data-filter name="enabled_flag" enforceOperations="query" expression="t1.enabled_flag=&apos;Y&apos;"/>
    </ns1:data-filters>
</ns1:model>
