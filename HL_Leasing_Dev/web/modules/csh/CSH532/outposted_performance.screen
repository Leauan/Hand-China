<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: zhangxing5129  
    $Date: 2014-8-1 下午02:44:52  
    $Revision: 1.0  
    $Purpose: 合同维护
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application" customizationEnabled="true" dynamiccreateenabled="true" trace="true">
    <a:view>
        <a:link id="wfl_con_contract_get_layout_code_link_id" model="cont.CON500.con_contract_get_layout_code" modelaction="update"/>
        <a:link id="csh532_outposted_performance_link" model="csh.CSH532.outposted_performance" modelaction="execute"/>
        <script><![CDATA[
			window['${/parameter/@layout_code}_user_button1_layout_dynamic_click'] = function() {
                var date_from = $('OUTPOSED_PERFORMANCE_QUERY__ds').getCurrentRecord().get('date_from');
                var date_to = $('OUTPOSED_PERFORMANCE_QUERY__ds').getCurrentRecord().get('date_to');
                if(!date_from||!date_to){
                    Aurora.showMessage('提示','日期从到不能为空！');
                    return;
                }else if(date_from > date_to){
                    Aurora.showMessage('提示','日期从不能大于日期到！');
                    return;
                }
                    Aurora.request({
                        url: $('csh532_outposted_performance_link').getUrl(),
                        para: {
                            date_from: date_from,
                            date_to: date_to
                        },
                        success: function() {
							window['${/parameter/@layout_code}_QUERY_LAYOUT_DYNAMIC_CLICK']();
                        },
                        scope: this
                    });
            };
            Aurora.onReady(function(){
                //Aurora.center('loginForm');
				window['${/parameter/@layout_code}_user_button1_layout_dynamic_click']();
            });
            window['${/parameter/@layout_code}_user_button2_layout_dynamic_click'] = function() {
				$('OUTPOSED_PERFORMANCE_RESULT_con_contract_layout_grid_id')._export('xls','驻外经理业绩统计表');
            };
		]]></script>
        <a:screen-include screen="modules/cont/CON500/con_contract_get_layout_code.screen"/>
    </a:view>
</a:screen>
