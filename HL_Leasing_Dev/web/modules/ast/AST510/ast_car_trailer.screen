<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: gonglu  
    $Date: 2014-4-21 下午2:16:03  
    $Revision: 1.0  
    $Purpose: 
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application">
    <a:init-procedure/>
    <a:view>
        <a:link id="ast510_trailer_attach_downloadfile_link" url="${/request/@context_path}/downloadFile.screen"/>
        <script><![CDATA[
        	function trailer_attachment_renderer(val,rec,name){
        	   return '<a href=javascript:open_trailer_attachment_window('+rec.get('ast_car_trailer_id')+')>附件查看</a>';
        	}
        
            function open_trailer_attachment_window(record_id){
        	    var url = $('ast510_trailer_attach_downloadfile_link').getUrl() + '?table_name=AST_CAR_TRAILER&header_id=' + record_id;
                var win = new Aurora.Window({
                    url: url,
                    title: '${l:HLS.SUPPORTING_DOCUMENT}',
                    id: 'ast510_trailer_downloadfile_window',
                    width: 850,
                    height: 400
                });
                win.on('close', function() {
                });
        	}
        	
		]]></script>
        <a:dataSets>
            <!-- <a:dataSet id="ast_car_trailer_result_ds" model="ast.AST505.ast_car_trailer" selectable="true">
                <a:fields>
                    <a:field name="ast_car_trailer_id"/>
                    <a:field name="item_detail_id"/>
                    <a:field name="trailer_date"/>
                    <a:field name="trailer_place"/>
                    <a:field name="trailer_partner"/>
                    <a:field name="trailer_fee"/>
                    <a:field name="trailer_result"/>
                    <a:field name="disposal_scheme"/>
                </a:fields>
            </a:dataSet> --><![CDATA[
            
            
            
        ]]></a:dataSets>
        <a:grid id="ast_car_trailer_grid_id" bindTarget="ast_car_trailer_result_ds" height="400" marginWidth="80" navBar="true">
            <a:columns>
                <a:column name="trailer_date" prompt="拖车时间" renderer="Aurora.formatDate" width="100"/>
                <a:column name="trailer_place" prompt="拖车地点" width="180"/>
                <a:column name="trail_wfl_status_desc" prompt="拖车申请状态" width="100"/>
                <a:column name="trail_fee_status_desc" prompt="拖车费用状态" width="100"/>
                <a:column name="trailer_reason" prompt="拖车原因" width="120"/>
                <a:column name="trailer_partner" prompt="拖车合作方" width="100"/>
                <a:column name="trailer_fee" align="right" prompt="拖车费用" renderer="Aurora.formatMoney" width="100"/>
                <a:column name="trailer_result" prompt="拖车结果" width="180"/>
                <a:column name="disposal_scheme" prompt="处置方案" width="180"/>
                <a:column align="center" prompt="附件查看" renderer="trailer_attachment_renderer" width="80"/>
            </a:columns>
        </a:grid>
        <a:hBox/>
    </a:view>
</a:screen>
