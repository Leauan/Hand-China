<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: ZLF  
    $Date: 2015-1-12 下午1:54:51  
    $Revision: 1.0  
    $Purpose: 项目信审结果月度报告
-->
<a:screen xmlns:c="aurora.application.action" xmlns:a="http://www.aurora-framework.org/application" xmlns:p="uncertain.proc">
    <a:init-procedure>
        <a:model-query model="prj.PRJ322.prj_assistant_approver" rootPath="assistant_approver"/>
        <a:model-query model="prj.PRJ322.prj_specialist_approver" rootPath="specialist_aprover"/>
        <a:model-query model="prj.PRJ322.prj_manager_approver" rootPath="manager_approver"/>
        <a:model-query model="prj.PRJ322.prj_chief_manager_approver" rootPath="chief_manager_approver"/>
    </a:init-procedure>
    <a:view>
        <script><![CDATA[
			function prj322_query(){
			    $('project_credit_result_ds').query();
			}
			
			function prj322_reset() {
				$('project_credit_query_ds').reset();
			}
		]]></script>
        <a:dataSets>
            <a:dataSet id="project_credit_query_ds">
                <a:fields>
                    <a:field name="year"/>
                    <a:field name="month"/>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="project_credit_result_ds" autoPageSize="true" autoQuery="true" model="prj.PRJ322.cf_prj_credit_report_v" queryDataSet="project_credit_query_ds"/>
        </a:dataSets>
        <a:screenBody>
            <a:screenTopToolbar>
                <a:screenTitle/>
                <a:gridButton click="prj322_reset" text="重置"/>
                <a:gridButton click="prj322_query" text="HLS.QUERY"/>
            </a:screenTopToolbar>
            <a:form column="5" labelWidth="100" title="HLS.QUERY_TITLE">
                <a:numberField name="year" allowDecimals="false" allowNegative="false" bindTarget="project_credit_query_ds" maxLength="4" prompt="年"/>
                <a:numberField name="month" allowDecimals="false" allowNegative="false" bindTarget="project_credit_query_ds" max="12" prompt="月"/>
                <p/>
                <div style="color:red;font-size:12px;"><![CDATA[注：此报表按申请时间查询案件数台次！]]></div>
            </a:form>
            <a:grid bindTarget="project_credit_result_ds" marginHeight="200" marginWidth="30" navBar="true">
                <a:toolBar>
                    <a:button type="excel"/>
                </a:toolBar>
                <a:columns>
                    <a:column name="report_date" align="center" prompt="年月" width="100"/>
                    <a:column name="return_count" align="center" prompt="退回案件数" width="100"/>
                    <a:column name="reject_count" align="center" prompt="拒绝案件数" width="100"/>
                    <a:column align="center" prompt="待认领" width="150">
                        <a:column align="center" prompt="初审" width="150">
                            <a:column align="center" prompt="" width="120">
                                <a:column name="renling_node_count" align="center" prompt="案件数" width="100"/>
                            </a:column>
                        </a:column>
                    </a:column>
                    <a:column align="center" prompt="审批中" width="800">
                        <a:column align="center" prompt="初审" width="400">
                            <a:placeHolder id="assistant_approver"/>
                        </a:column>
                        <a:column align="center" prompt="复审" width="200">
                            <a:placeHolder id="specialist_approver"/>
                        </a:column>
                        <a:column align="center" prompt="风控经理" width="200">
                            <a:placeHolder id="manager_approver"/>
                        </a:column>
                        <a:column align="center" prompt="副总经理" width="200">
                            <a:placeHolder id="chief_manager_approver"/>
                        </a:column>
                    </a:column>
                    <a:column align="center" prompt="审批通过" width="800">
                        <a:column align="center" prompt="无条件通过" width="120">
                            <a:column prompt="">
                                <a:column name="pass_direct_count" align="center" prompt="案件数" width="100"/>
                                <!-- <a:column name="pass_direct_car_count" align="center" prompt="台次" width="60"/> -->
                            </a:column>
                        </a:column>
                        <a:column align="center" prompt="附条件通过" width="120">
                            <a:column prompt="">
                                <a:column name="pass_cond_count" align="center" prompt="案件数" width="100"/>
                                <!-- <a:column name="pass_cond_car_count" align="center" prompt="台次" width="60"/> -->
                            </a:column>
                        </a:column>
                        <a:column align="center" prompt="重审无条件通过" width="120">
                            <a:column prompt="">
                                <a:column name="deny_count" align="center" prompt="案件数" width="100"/>
                                <!-- <a:column name="deny_car_count" align="center" prompt="台次" width="60"/> -->
                            </a:column>
                        </a:column>
                        <a:column align="center" prompt="重审附条件通过" width="120">
                            <a:column prompt="">
                                <a:column name="deny_cond_count" align="center" prompt="案件数" width="100"/>
                                <!-- <a:column name="deny_car_count" align="center" prompt="台次" width="60"/> -->
                            </a:column>
                        </a:column>
                        <a:column align="center" prompt="取消" width="120">
                            <a:column prompt="">
                                <a:column name="cancel_count" align="center" prompt="案件数" width="100"/>
                            </a:column>
                        </a:column>
                    </a:column>
                </a:columns>
            </a:grid>
        </a:screenBody>
    </a:view>
    <a:view-config>
        <c:create-config targetId="assistant_approver">
            <p:loop source="/model/assistant_approver">
                <c:process-config>
                    <a:column align="center" prompt="${@employee_name}" width="120">
                        <a:column name="assistant_${@employee_code}_count" align="center" prompt="案件数" width="100"/>
                        <!-- <a:column name="assistant_${@employee_code}_car_count" align="center" prompt="台次" width="60"/> -->
                    </a:column>
                </c:process-config>
            </p:loop>
        </c:create-config>
        <c:create-config targetId="specialist_approver">
            <p:loop source="/model/specialist_aprover">
                <c:process-config>
                    <a:column align="center" prompt="${@employee_name}" width="120">
                        <a:column name="specialist_${@employee_code}_count" align="center" prompt="案件数" width="100"/>
                        <!-- <a:column name="specialist_${@employee_code}_car_count" align="center" prompt="台次" width="60"/> -->
                    </a:column>
                </c:process-config>
            </p:loop>
        </c:create-config>
        <c:create-config targetId="manager_approver">
            <p:loop source="/model/manager_approver">
                <c:process-config>
                    <a:column align="center" prompt="${@employee_name}" width="120">
                        <a:column name="manager_${@employee_code}_count" align="center" prompt="案件数" width="100"/>
                        <!-- <a:column name="manager_${@employee_code}_car_count" align="center" prompt="台次" width="60"/> -->
                    </a:column>
                </c:process-config>
            </p:loop>
        </c:create-config>
        <c:create-config targetId="chief_manager_approver">
            <p:loop source="/model/chief_manager_approver">
                <c:process-config>
                    <a:column align="center" prompt="${@employee_name}" width="120">
                        <a:column name="chief_manager_${@employee_code}_count" align="center" prompt="案件数" width="100"/>
                        <!-- <a:column name="manager_${@employee_code}_car_count" align="center" prompt="台次" width="60"/> -->
                    </a:column>
                </c:process-config>
            </p:loop>
        </c:create-config>
    </a:view-config>
</a:screen>
