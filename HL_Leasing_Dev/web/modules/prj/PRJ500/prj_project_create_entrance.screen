<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: gaoyang  
    $Date: 2013-6-28 上午10:24:00  
    $Revision: 1.0  
    $Purpose: 
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application" customizationEnabled="true" dynamiccreateenabled="true" trace="true">
    <a:init-procedure/>
    <a:view>
        <a:link id="con_contract_get_layout_code_link_id" model="cont.CON500.con_contract_get_layout_code" modelaction="update"/>
        <a:link id="prj_create_link" url="${/request/@context_path}/modules/prj/PRJ500/prj_project_create.screen"/>
        <script><![CDATA[
			window['${/parameter/@layout_code}_user_button1_layout_dynamic_click'] = function() {
			    var ds_id = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'prj_project');
                if ($(ds_id).validate()) {
                    var record = $(ds_id).getAt(0);
                    record.set('function_code','PRJ501E');
	                record.set('function_usage', 'CREATE');
	                record.data['url_title']='${l:PRJ500.PROJECT_CREATE}';
	                var param = record.data;
	                hls_doc_get_layout_code('con_contract_get_layout_code_link_id',param,'prj_create_link');
                }
            };
            
            function on_prj_project_create_entrance_cancel() {
                $('prj_document_create_entrance_ds').reset();
            }
        ]]></script>
        <a:screenBody>
            <a:screen-include screen="modules/prj/PRJ500/prj_project_get_layout_code.screen"/>
        </a:screenBody>
    </a:view>
</a:screen>
