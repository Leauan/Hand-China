<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: qianming 
    $Date: 2015-5-22 下午1:35:50  
    $Revision: 1.0  
    $Purpose: 
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application">
    <a:init-procedure/>
    <a:view>
        <a:dataSets>
            <a:dataSet id="hls_lease_channel_ds" loadData="true" model="cont.CON341.hls_lease_channel"/>
            <a:dataSet id="business_type_ds" loadData="true" model="cont.CON341.hls_business_type"/>
            <a:dataSet id="yonda_report_cashflow_v_query_ds" autoCreate="true">
                <a:fields>
                    <a:field name="contract_number" lovGridHeight="300" lovHeight="470" lovService="cont.CON341.con_contract_for_lov" lovWidth="600" title="合同">
                        <a:mapping>
                            <a:map from="contract_id" to="contract_id"/>
                            <a:map from="contract_number" to="contract_number"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="bp_name" lovGridHeight="330" lovHeight="470" lovLabelWidth="120" lovService="cont.CON341.hls_bp_master_v_all_lov?bp_category=TENANT" lovWidth="700" title="承租人">
                        <a:mapping>
                            <a:map from="bp_id" to="bp_id"/>
                            <a:map from="bp_name" to="bp_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="business_type_n" displayField="code_value_name" options="business_type_ds" returnField="business_type" valueField="code_value"/>
                    <a:field name="lease_channel_n" displayField="code_value_name" options="hls_lease_channel_ds" returnField="lease_channel" valueField="code_value"/>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="yonda_report_cashflow_v_result_ds" autoPageSize="true" model="cont.CON341.yonda_report_cashflow_v" queryDataSet="yonda_report_cashflow_v_query_ds"/>
        </a:dataSets>
        <a:screenBody>
            <a:queryForm id="yonda_report_cashflow_v_query_id" bindTarget="yonda_report_cashflow_v_query_ds" createSearchButton="true" marginWidth="35" resultTarget="yonda_report_cashflow_v_result_ds">
                <a:formToolBar labelWidth="110">
                    <a:lov name="contract_number" prompt="合同编号"/>
                    <a:lov name="bp_name" prompt="承租人"/>
                    <a:textField name="invoice_title" prompt="开票抬头"/>
                    <a:textField name="billing_desc" prompt="开票内容"/>
                </a:formToolBar>
                <a:formBody column="4" labelWidth="145">
                    <a:textField name="invoice_type" prompt="开票类型"/>
                    <a:numberField name="times" prompt="期数"/>
                    <a:comboBox name="business_type_n" prompt="业务模式"/>
                    <a:comboBox name="lease_channel_n" prompt="产品类型"/>
                    <a:datePicker name="due_date_from" prompt="应收日期从"/>
                    <a:datePicker name="due_date_to" prompt="应收日期至"/>
                    <a:datePicker name="last_received_date_from" prompt="实收日期从"/>
                    <a:datePicker name="last_received_date_to" prompt="实收日期至"/>
                    <a:numberField name="due_amount_from" prompt="应收租金从"/>
                    <a:numberField name="due_amount_to" prompt="应收租金至"/>
                    <a:numberField name="received_amount_from" prompt="已收租金从"/>
                    <a:numberField name="received_amount_to" prompt="已收租金至"/>
                    <a:numberField name="total_billing_amount_t_from" prompt="截至当期已开票从"/>
                    <a:numberField name="total_billing_amount_t_to" prompt="截至当期已开票至"/>
                    <a:numberField name="total_rec_amount_t_from" prompt="截至当期已收款从"/>
                    <a:numberField name="total_rec_amount_t_to" prompt="截至当期已收款至"/>
                </a:formBody>
            </a:queryForm>
            <a:grid id="yonda_report_cashflow_v_result_id" bindTarget="yonda_report_cashflow_v_result_ds" marginHeight="100" marginWidth="35" navBar="true" showRowNumber="true">
                <a:toolBar>
                    <a:button type="excel"/>
                    <a:button type="clear"/>
                </a:toolBar>
                <a:columns>
                    <a:column name="contract_number" lock="true" prompt="合同编号" width="140"/>
                    <a:column name="bp_name" lock="true" prompt="承租人" showTitle="true" width="200"/>
                    <a:column name="invoice_title" prompt="开票抬头" showTitle="true" width="180"/>
                    <a:column name="contract_status_n" align="center" prompt="合同状态" showTitle="true" width="80"/>
                    <a:column name="business_type_n" align="center" prompt="业务模式" showTitle="true" width="140"/>
                    <a:column name="lease_channel_n" align="center" prompt="产品类型" showTitle="true" width="80"/>
                    <a:column name="invoice_type" align="center" prompt="开票类型" showTitle="true" width="80"/>
                    <a:column name="billing_desc" align="center" prompt="开票内容" showTitle="true" width="80"/>
                    <a:column name="times" align="center" prompt="期数" width="60"/>
                    <a:column name="due_date" align="center" prompt="应收日期" width="80"/>
                    <a:column name="last_received_date" align="center" prompt="实收日期" width="80"/>
                    <a:column name="due_amount" align="right" prompt="应收租金" renderer="Aurora.formatMoney"/>
                    <a:column name="principal" align="right" prompt="应收本金" renderer="Aurora.formatMoney"/>
                    <a:column name="interest" align="right" prompt="应收利息" renderer="Aurora.formatMoney"/>
                    <a:column name="received_amount" align="right" prompt="已收租金" renderer="Aurora.formatMoney"/>
                    <a:column name="received_principal" align="right" prompt="已收本金" renderer="Aurora.formatMoney"/>
                    <a:column name="received_interest" align="right" prompt="已收利息" renderer="Aurora.formatMoney"/>
                    <a:column name="total_billing_amount_t" align="right" prompt="截至当期已开票" renderer="Aurora.formatMoney"/>
                    <a:column name="total_rec_amount_t" align="right" prompt="截至当期已收款" renderer="Aurora.formatMoney"/>
                    <a:column name="total_billing_amount_d" align="right" prompt="截至今日已开票" renderer="Aurora.formatMoney"/>
                    <a:column name="total_rec_amount_d" align="right" prompt="截至今日已收款" renderer="Aurora.formatMoney"/>
                </a:columns>
            </a:grid>
        </a:screenBody>
    </a:view>
</a:screen>
