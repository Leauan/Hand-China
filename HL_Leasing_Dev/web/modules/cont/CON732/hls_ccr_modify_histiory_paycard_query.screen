<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: Harry 9952 
    $Date: 2017-1-12 下午01:23:56  
    $Revision: 1.0  
    $Purpose: 合同变更信息查询-风险部
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application" customizationEnabled="true" trace="true">
    <a:view>
        <script><![CDATA[
            function set_color(value, record, name) {
                var history_record = $('hls_standard_history_ds').getAt(0);
                if (name == 'dd_bank_account_name') {
                    if (record.get('dd_bank_account_name')) {
                        if (history_record.get('dd_bank_account_name') != record.get('dd_bank_account_name')) {
                            return '<a>' + "<font color='red'>" + value + "</font>" + '</a>';
                        } else {
                            return '<a>' + "<font color='black'>" + value + "</font>" + '</a>';
                        }
                    }
                }
                if (name == 'direct_debit_bank_id_n') {
                    if (record.get('direct_debit_bank_id_n')) {
                        if (history_record.get('direct_debit_bank_id_n') != record.get('direct_debit_bank_id_n')) {
                            return '<a>' + "<font color='red'>" + value + "</font>" + '</a>';
                        } else {
                            return '<a>' + "<font color='black'>" + value + "</font>" + '</a>';
                        }
                    }
                }
                if (name == 'dd_bank_account_num') {
                    if (record.get('dd_bank_account_num')) {
                        if (history_record.get('dd_bank_account_num') != record.get('dd_bank_account_num')) {
                            return '<a>' + "<font color='red'>" + value + "</font>" + '</a>';
                        } else {
                            return '<a>' + "<font color='black'>" + value + "</font>" + '</a>';
                        }
                    }
                }
                if (name == 'ebank_account_prop_n') {
                    if (record.get('ebank_account_prop_n')) {
                        if (history_record.get('ebank_account_prop_n') != record.get('ebank_account_prop_n')) {
                            return '<a>' + "<font color='red'>" + value + "</font>" + '</a>';
                        } else {
                            return '<a>' + "<font color='black'>" + value + "</font>" + '</a>';
                        }
                    }
                }
                if (name == 'license_number') {
                    if (record.get('license_number')) {
                        if (history_record.get('license_number') != record.get('license_number')) {
                            return '<a>' + "<font color='red'>" + value + "</font>" + '</a>';
                        } else {
                            return '<a>' + "<font color='black'>" + value + "</font>" + '</a>';
                        }
                    }
                }
                if (name == 'reg_number') {
                    if (record.get('reg_number')) {
                        if (history_record.get('reg_number') != record.get('reg_number')) {
                            return '<a>' + "<font color='red'>" + value + "</font>" + '</a>';
                        } else {
                            return '<a>' + "<font color='black'>" + value + "</font>" + '</a>';
                        }
                    }
                }
				if (name == 'business_fee') {
                    if (record.get('business_fee')) {
                        if (history_record.get('business_fee') != record.get('business_fee')) {
                            return '<a>' + "<font color='red'>" + value + "</font>" + '</a>';
                        } else {
                            return '<a>' + "<font color='black'>" + value + "</font>" + '</a>';
                        }
                    }
                }
            }
        ]]></script>
        <a:dataSets>
            <a:dataSet id="hls_standard_history_ds" loadData="true" model="cont.CON731.hls_con_change_history_query" queryUrl="${/request/@context_path}/autocrud/cont.CON731.hls_con_change_history_query/query?contract_id=${/parameter/@contract_id}"><![CDATA[
            ]]></a:dataSet>
            <a:dataSet id="hls_ccr_current_ds" autoQuery="true" model="cont.CON731.hls_con_change_current_query" queryUrl="${/request/@context_path}/autocrud/cont.CON731.hls_con_change_current_query/query?contract_id=${/parameter/@contract_id}"><![CDATA[
            ]]></a:dataSet>
        </a:dataSets>
        <a:screenBody>
            <a:grid bindTarget="hls_standard_history_ds" height="70" width="1080">
                <a:columns>
                    <a:column name="history_value" align="center" prompt="变更项" width="60"/>
                    <a:column name="dd_bank_account_name" prompt="客户扣款账户名" width="150"/>
                    <a:column name="direct_debit_bank_id_n" prompt="客户扣款银行" width="200"/>
                    <a:column name="dd_bank_account_num" prompt="客户扣款账号" width="200"/>
                    <a:column name="ebank_account_prop_n" prompt="客户扣款账户类型" width="150"/>
                    <a:column name="license_number" prompt="车牌号 " width="150"/>
                    <a:column name="reg_number" prompt="抵押登记证号" width="150"/>
					<a:column name="business_fee" align="right" prompt="业务委托费" width="100"/>
                </a:columns>
            </a:grid>
            <a:grid bindTarget="hls_ccr_current_ds" height="70" width="1080">
                <a:columns>
                    <a:column name="current_value" align="center" prompt="变更项" width="60"/>
                    <a:column name="dd_bank_account_name" prompt="客户扣款账户名" renderer="set_color" width="150"/>
                    <a:column name="direct_debit_bank_id_n" prompt="客户扣款银行" renderer="set_color" width="200"/>
                    <a:column name="dd_bank_account_num" prompt="客户扣款账号" renderer="set_color" width="200"/>
                    <a:column name="ebank_account_prop_n" prompt="客户扣款账户类型" renderer="set_color" width="150"/>
                    <a:column name="license_number" prompt="车牌号" renderer="set_color" width="150"/>
                    <a:column name="reg_number" prompt="抵押登记证号" renderer="set_color" width="150"/>
					<a:column name="business_fee" align="right" prompt="业务委托费" renderer="set_color" width="100"/>
                </a:columns>
            </a:grid>
        </a:screenBody>
    </a:view>
</a:screen>
