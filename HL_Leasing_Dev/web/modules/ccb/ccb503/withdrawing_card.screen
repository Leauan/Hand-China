<?xml version="1.0" encoding="UTF-8"?>
<!--
	&author:DJ
	$date:2013/05/08
	$purpose:扣款卡定义
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application" trace="true">
    <a:view>
        <script><![CDATA[
            function cardDs_grid_add() {
                 $('cardDs_grid').showEditorByRecord($('cardDs').create());
            }
            
            function cardDs_grid_query() {
                $('cardDs').query();
            }
            
            function cardDs_grid_reset() {
                $('cardDs_query').reset();
            }
            
            
            
            function cardDs_grid_save() {
                var result_ds = $('cardDs');
                if (result_ds.validate()) {
                    result_ds.submit();
                }
            }
            
         
        ]]></script>
        <a:dataSets>
            <a:dataSet id="withhold_way_ds" loadData="true" lookupCode="WITHHOLD_WAYS"/>
            <a:dataSet id="cup_channel_ds" loadData="true" lookupCode="CUP_CHANNELS"/>
			<a:dataSet id="trx_code_ds" loadData="true" lookupCode="TRX_CODE"/>
			<a:dataSet id="limit_period_unit_ds" loadData="true" lookupCode="LIMIT_PERIOD_UNIT"/>
            <a:dataSet id="enabled_flag_ds" loadData="true" lookupCode="ENABLE_FLAG"/>
            <a:dataSet id="cardDs_query">
                <a:fields>
                    <a:field name="ebank_name"/>
                    <a:field name="withhold_way"/>
                    <a:field name="withhold_way_name" displayField="code_value_name" options="withhold_way_ds" returnField="withhold_way" valueField="code_value"/>
                    <a:field name="cup_channel"/>
                    <a:field name="cup_channel_name" displayField="code_value_name" options="cup_channel_ds" returnField="cup_channel" valueField="code_value"/>
                    <a:field name="enabled_flag"/>
                    <a:field name="enabled_flag_name" displayField="code_value_name" options="enabled_flag_ds" returnField="enabled_flag" valueField="code_value"/>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="cardDs" autoPageSize="true" autoQuery="true" fetchAll="false" model="ccb.ccb503.withdrawing_card" queryDataSet="cardDs_query" selectable="true">
                <a:fields>
                    <a:field name="ebank_name"/>
                    <a:field name="withhold_way"/>
                    <a:field name="withhold_way_name" displayField="code_value_name" options="withhold_way_ds" returnField="withhold_way" valueField="code_value"/>
                    <a:field name="cup_channel"/>
                    <a:field name="cup_channel_name" displayField="code_value_name" options="cup_channel_ds" returnField="cup_channel" valueField="code_value"/>
                    <a:field name="trx_code" />
                    <a:field name="trx_code_name" displayField="code_value_name" required="true" options="trx_code_ds" returnField="trx_code" valueField="code_value"/>
                    <a:field name="limit_period_unit" />
                    <a:field name="limit_period_unit_name" displayField="code_value_name" required="true" options="limit_period_unit_ds" returnField="limit_period_unit" valueField="code_value"/>
                    <a:field name="max_cnt_limit" required="true"/> 
                    <a:field name="single_limit" required="true"/> 
					<a:field name="enabled_flag"/>
                    <a:field name="enabled_flag_name" displayField="code_value_name" options="enabled_flag_ds" returnField="enabled_flag" valueField="code_value"/>
                </a:fields>
            </a:dataSet>
        </a:dataSets>
        <a:screenBody>
            <a:screenTopToolbar>
                <a:screenTitle/>
                <a:gridButton click="cardDs_grid_add" text="新增"/>
                <a:gridButton click="cardDs_grid_query" text="HLS.QUERY"/>
                <a:gridButton click="cardDs_grid_reset" text="HLS.RESET"/>
                <a:gridButton click="cardDs_grid_save" text="HLS.SAVE"/>
            </a:screenTopToolbar>
            <a:form column="4" labelWidth="100">
                <a:textField name="ebank_name" bindTarget="cardDs_query" prompt="银行名称"/>
                <a:comboBox name="withhold_way_name" bindTarget="cardDs_query" prompt="扣款方式"/>
                <a:comboBox name="cup_channel_name" bindTarget="cardDs_query" prompt="扣款渠道"/>
                <a:comboBox name="enabled_flag_name" bindTarget="cardDs_query" prompt="是否启用"/>
            </a:form>
            <a:grid id="cardDs_grid" bindTarget="cardDs" marginHeight="250" marginWidth="30">
                <a:columns>
                    <a:column name="ebank_name" editor="cardDs_grid_editor_tf" prompt="银行名称" width="300"/>
                    <a:column name="withhold_way_name" editor="cardDs_grid_editor_comb" prompt="扣款方式"/>
                    <a:column name="cup_channel_name" align="center" editor="cardDs_grid_editor_comb" prompt="扣款渠道" width="100"/>
					<a:column name="trx_code_name" align="center" editor="cardDs_grid_editor_comb" prompt="商户签约接口" width="100"/>
					<a:column name="limit_period_unit_name" align="center" editor="cardDs_grid_editor_comb" prompt="委托代扣限制周期" width="100"/>
                    <a:column name="max_cnt_limit" editor="cardDs_grid_editor_tf" prompt="委托代扣限制周期内最大代扣次数" width="100"/>
                    <a:column name="single_limit" editor="cardDs_grid_editor_tf" prompt="委托代扣单笔最大金额" width="100"/>
                    <a:column name="seq_num" align="center" editor="cardDs_grid_editor_tf" prompt="排序" width="100"/>
					<a:column name="enabled_flag_name" align="center" editor="cardDs_grid_editor_comb" prompt="是否启用" width="100"/>
                </a:columns>
                <a:editors>
                    <a:textField id="cardDs_grid_editor_tf"/>
                    <a:comboBox id="cardDs_grid_editor_comb"/>
                    <a:checkBox id="cardDs_grid_editor_check"/>
                </a:editors>
            </a:grid>
        </a:screenBody>
    </a:view>
</a:screen>
