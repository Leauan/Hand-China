<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: zhangxing5129  
    $Date: 2014-11-25 下午01:23:56  
    $Revision: 1.0  
    $Purpose: 合同商业伙伴信息变更
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application" customizationEnabled="true" trace="true">
    <a:view>
        <script><![CDATA[
            function con_contract_bp_ds_indexchange(ds, record) {
                $('hls_standard_history_bp_ds').setQueryParameter('table_pk_value', record.get('bp_id'));
                $('hls_standard_history_bp_ds').setQueryParameter('table_name', 'HLS_BP_MASTER');
                $('hls_standard_history_bp_ds').query();
            }
        ]]></script>
        <a:dataSets>
            <a:dataSet id="con_contract_bp_ds" autoQuery="true" fetchAll="true" queryUrl="${/request/@context_path}/autocrud/cont.CON751.con_contract_change_bp_query/query?contract_id=${/parameter/@contract_id}">
                <a:events>
                    <a:event name="indexchange" handler="con_contract_bp_ds_indexchange"/>
                </a:events>
            </a:dataSet>
            <a:dataSet id="hls_standard_history_bp_ds" fetchAll="true" model="wfl_screen.CON_CONTRACT.hls_standard_history_query" queryUrl="${/request/@context_path}/autocrud/wfl_screen.CON_CONTRACT.hls_standard_history_query/query?contract_id=${/parameter/@contract_id}">
                <a:fields>
                    <a:field name="column_name" prompt="变更字段"/>
                    <a:field name="prompt" prompt="描述"/>
                    <a:field name="from_column_value" prompt="变更前"/>
                    <a:field name="to_column_value" prompt="变更后"/>
                </a:fields>
            </a:dataSet>
        </a:dataSets>
        <a:screenBody>
            <a:hBox>
                <a:grid bindTarget="con_contract_bp_ds" height="300" navBar="true" width="600">
                    <a:columns>
                        <a:column name="bp_category_n" prompt="HLS.BP_CATEGORY" width="100"/>
                        <a:column name="bp_id_n" prompt="HLS.BP_NAME" width="195"/>
                        <a:column name="enabled_flag" align="center" prompt="是否启用" width="60"/>
                        <a:column name="bp_link" align="center" prompt="商业伙伴明细" renderer="con751_g_bp_renderer" width="130"/>
                    </a:columns>
                </a:grid>
                <a:grid bindTarget="hls_standard_history_bp_ds" height="300" width="610">
                    <a:columns>
                        <a:column name="table_name" prompt="变更内容" width="150"/>
                        <a:column name="prompt" prompt="内容明细" width="150"/>
                        <a:column name="from_column_value" prompt="变更前" width="150"/>
                        <a:column name="to_column_value" prompt="变更后" width="150"/>
                    </a:columns>
                </a:grid>
            </a:hBox>
        </a:screenBody>
    </a:view>
</a:screen>
