<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: qwm  
    $Date: 2014-1-18 下午4:28:02  
    $Revision: 1.0  
    $Purpose: 
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application">
    <a:init-procedure/>
    <a:view package="aurora.ui.std" template="default">
        <a:link id="prj_project_approver_idea_print_link" url="${/request/@context_path}/modules/prj/PRJ601/prj_project_approver_idea_print.screen"/>
        <a:link id="prj_project_manager_reply_print_link" url="${/request/@context_path}/modules/prj/PRJ601/prj_project_manager_reply_print.screen"/>
        <a:link id="prj_project_approval_print_temp_link_id" url="${/request/@context_path}/modules/prj/PRJ601/prj_project_approval_print_temp.screen"/>
        <a:link id="prj_project_approver_idea_print_temp_link" url="${/request/@context_path}/modules/prj/PRJ601/prj_project_approver_idea_print_temp.screen"/>
        <div/>
        <script><![CDATA[
            function projectDetailScreen_close() {
                $('${/parameter/@winId}').close();
            }
            
            function approver_idea_render(value, record, name) {
                if (record.get('project_id')) {
                    var url = $('prj_project_approver_idea_print_link').getUrl() + '?approval_id=' + record.get('approval_id') + '&project_name=' + encodeURI(encodeURI(record.get('project_name')));
                    return '<a href="javascript:WordPrint(\'' + url + '\');">' + '${l:HLS.PRINT}' + '</a>';
            
                }
            }
            
            function manager_reply_render(value, record, name) {
            
                if (record.get('project_id')) {
                    var url = $('prj_project_manager_reply_print_link').getUrl() + '?approval_id=' + record.get('approval_id') + '&project_name=' + encodeURI(encodeURI(record.get('project_name')));
                    return '<a href="javascript:WordPrint(\'' + url + '\');">' + '${l:HLS.PRINT}' + '</a>';
            
                }
            }
            //浏览器打印
            function browser_print(url){
                window.open(url);
            }
            //word打印
            function WordPrint(url) {
                window.location.href=url;
                
            }
        ]]></script>
        <a:dataSets>
            <a:dataSet id="approval_result_detailDs" autoPageSize="true" autoQuery="true" model="prj.PRJ601.prj_project_approval_result_detail" queryUrl="${/request/@context_path}/autocrud/prj.PRJ601.prj_project_approval_result_detail/query?project_id=${/parameter/@project_id}"/>
        </a:dataSets>
        <a:screenBody>
            <a:screenTopToolbar>
                <a:gridButton click="projectDetailScreen_close" text="HLS.CLOSE"/>
            </a:screenTopToolbar>
            <a:form column="4" labelSeparator=" " labelWidth="120" marginWidth="30" title="">
                <a:textField name="project_number" bindTarget="projectQueryScreen_mainDs" prompt="HLS.PROJECT_NUMBER" readOnly="true"/>
                <a:textField name="project_name" bindTarget="projectQueryScreen_mainDs" prompt="HLS.PROJECT_NAME" readOnly="true" width="170"/>
                <a:textField name="employee_name" bindTarget="projectQueryScreen_mainDs" prompt="HLS.SALES_EMPLOYEE" readOnly="true"/>
                <a:textField name="lease_organization_desc" bindTarget="projectQueryScreen_mainDs" prompt="HLS.LEASE_ORGANIZATION" readOnly="true"/>
            </a:form>
            <a:grid id="approval_result_detail_grid" bindTarget="approval_result_detailDs" marginHeight="200" marginWidth="30" navBar="true">
                <a:columns>
                    <a:column name="meeting_date" prompt="PRJ601.MEETING_DATE" width="120"/>
                    <a:column name="meeting_name" prompt="PRJ601.MEETING_NAME" width="150"/>
                    <a:column name="approval_result_desc" prompt="PRJ601.APPROVAL_RESULT" width="120"/>
                    <a:column name="approver_idea" align="center" prompt="PRJ601.APPROVER_IDEA" renderer="approver_idea_render" width="120"/>
                    <a:column name="manager_reply" align="center" prompt="PRJ601.MANAGER_REPLY" renderer="manager_reply_render" width="180"/>
                </a:columns>
            </a:grid>
        </a:screenBody>
    </a:view>
</a:screen>
