<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: WCS  
    $Date: 2015-2-3 下午08:30:56  
    $Revision: 1.0  
    $Purpose: 
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application">
    <a:view>
        <script><![CDATA[
			function query()
			{
			    $('ast_car_insurance_query_result_ds').query();
			}
			function reset()
			{
			    $('ast_car_insurance_query_hd_ds').reset();
			}
		]]></script>
        <a:dataSets>
            <a:dataSet id="yes_no_ds" lookupCode="YES_NO"/>
            <a:dataSet id="ast_car_insurance_query_hd_ds" autoCreate="true">
                <a:fields>
                    <a:field name="insurance_flag_desc" displayField="code_value_name" options="yes_no_ds" returnField="insurance_flag" valueField="code_value"/>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="ast_car_insurance_query_result_ds" autoQuery="true" model="ast.AST303.ast_car_insurance_v" queryDataSet="ast_car_insurance_query_hd_ds">
                <a:fields>
                    <a:field name="unit_id_n" readOnly="true"/>
                </a:fields>
            </a:dataSet>
        </a:dataSets>
        <a:screenBody>
            <a:screenTopToolbar>
                <a:screenTitle/>
                <a:gridButton click="query" text="查询"/>
                <a:gridButton click="reset" text="重置"/>
            </a:screenTopToolbar>
            <a:form column="4" labelWidth="120" marginWidth="30" title="查询条件">
                <a:textField name="contract_number" bindTarget="ast_car_insurance_query_hd_ds" prompt="合同编号" width="180"/>
                <a:textField name="bp_id_tenant_n" bindTarget="ast_car_insurance_query_hd_ds" prompt="承租人名称" width="180"/>
                <a:comboBox name="insurance_flag_desc" bindTarget="ast_car_insurance_query_hd_ds" prompt="保险打包融资" width="180"/>
                <a:textField name="item_frame_number" bindTarget="ast_car_insurance_query_hd_ds" prompt="车架号" width="180"/>
                <a:textField name="item_engine_number" bindTarget="ast_car_insurance_query_hd_ds" prompt="发动机号" width="180"/>
                <a:textField name="license_number" bindTarget="ast_car_insurance_query_hd_ds" prompt="车牌号" width="180"/>
                <a:textField name="unit_id_n" bindTarget="ast_car_insurance_query_hd_ds" prompt="保险购买单位" width="180"/>
            </a:form>
            <a:grid bindTarget="ast_car_insurance_query_result_ds" marginHeight="200" marginWidth="30" navBar="true">
                <a:toolBar>
                    <a:button type="excel"/>
                </a:toolBar>
                <a:columns>
                    <a:column name="contract_number" align="center" prompt="合同编号" width="150"/>
                    <a:column name="bp_id_tenant_n" align="center" prompt="承租人" width="150"/>
                    <a:column name="lease_times" align="center" prompt="租赁期限" width="80"/>
                    <a:column name="insurance_flag" align="center" prompt="保险是否打包融资" width="150"/>
                    <a:column name="brand_id_n" align="center" prompt="品牌" width="100"/>
                    <a:column name="series_id_n" align="center" prompt="车系" width="100"/>
                    <a:column name="model_id_n" align="center" prompt="车型" width="100"/>
                    <a:column name="item_frame_number" align="center" prompt="车架号" width="100"/>
                    <a:column name="item_engine_number" align="center" prompt="发动机号" width="150"/>
                    <a:column name="license_number" align="center" prompt="牌照号" width="150"/>
                    <a:column name="insurance_bp_name" align="center" prompt="保险公司" width="150"/>
                    <a:column name="insurance_type" align="center" prompt="险种" width="150"/>
                    <a:column name="business_insurance_year" align="center" prompt="购买商业险的期限(年)" width="100"/>
                    <a:column name="business_insurance_end_date" align="center" prompt="商业险到期日" renderer="Aurora.formatDate" width="100"/>
                    <a:column name="first_biz_insurance_start_date" align="center" prompt="第一年保险起始日" renderer="Aurora.formatDate" width="100"/>
                    <a:column name="first_biz_insurance_end_date" align="center" prompt="第一年保险到期日" renderer="Aurora.formatDate" width="100"/>
                    <a:column name="second_biz_ins_start_date" align="center" prompt="第二年保险起始日" renderer="Aurora.formatDate" width="100"/>
                    <a:column name="second_biz_ins_end_date" align="center" prompt="第二年保险到期日" renderer="Aurora.formatDate" width="100"/>
                    <a:column name="third_biz_ins_start_date" align="center" prompt="第三年保起始日" renderer="Aurora.formatDate" width="100"/>
                    <a:column name="third_biz_ins_end_date" align="center" prompt="第三年保险到期日" renderer="Aurora.formatDate" width="100"/>
                    <a:column name="fourth_biz_ins_start_date" align="center" prompt="第四年保起始日" renderer="Aurora.formatDate" width="100"/>
                    <a:column name="fourth_biz_ins_end_date" align="center" prompt="第四年保险到期日" renderer="Aurora.formatDate" width="100"/>
                    <a:column name="first_insurance_amount" align="right" prompt="第一年新保费用" renderer="Aurora.formatMoney" width="100"/>
                    <a:column name="second_insurance_amount" align="right" prompt="第二年保险费用" renderer="Aurora.formatMoney" width="100"/>
                    <a:column name="third_insurance_amount" align="right" prompt="第三年新保费用" renderer="Aurora.formatMoney" width="100"/>
                    <a:column name="fourth_insurance_amount" align="right" prompt="第四年新保费用" renderer="Aurora.formatMoney" width="100"/>
                    <a:column name="total_insurance_amount" align="right" prompt="合计总费用" renderer="Aurora.formatMoney" width="150"/>
                    <a:column name="inspected_date" align="center" prompt="车辆年检日期" renderer="Aurora.formatDate" width="150"/>
                    <a:column name="unit_id_n" align="center" editor="ast_textArea_id" prompt="负责保险购买的单位" width="100"/>
                    <a:column name="insurance_due_days" align="center" prompt="距离保险到期日的天数" width="150"/>
                </a:columns>
                <a:editors>
                    <a:textArea id="ast_textArea_id"/>
                </a:editors>
            </a:grid>
        </a:screenBody>
    </a:view>
</a:screen>
