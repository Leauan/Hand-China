<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: zhangxing5129  
    $Date: 2014-11-27 下午01:26:08  
    $Revision: 1.0  
    $Purpose: 租赁物变更
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application" customizationEnabled="true" trace="true">
    <a:view>
        <script><![CDATA[
            function con_contract_lease_ds_indexchange(ds, record) {
                $('hls_standard_history_lease_ds').setQueryParameter('table_pk_value', record.get('contract_lease_item_id'));
                $('hls_standard_history_lease_ds').setQueryParameter('table_name', 'CON_CONTRACT_LEASE_ITEM');
                $('hls_standard_history_lease_ds').query();
            }
        ]]></script>
        <a:dataSets>
            <a:dataSet id="con_contract_lease_ds" autoQuery="true" fetchAll="true" queryUrl="${/request/@context_path}/autocrud/cont.CON751.con_contract_lease_item_v/query?contract_id=${/parameter/@contract_id}">
                <a:events>
                    <a:event name="indexchange" handler="con_contract_lease_ds_indexchange"/>
                </a:events>
            </a:dataSet>
            <a:dataSet id="hls_standard_history_lease_ds" fetchAll="true" model="wfl_screen.CON_CONTRACT.hls_standard_history_query" queryUrl="${/request/@context_path}/autocrud/wfl_screen.CON_CONTRACT.hls_standard_history_query/query?contract_id=${/parameter/@contract_id}">
                <a:fields>
                    <a:field name="column_name" prompt="变更字段"/>
                    <a:field name="prompt" prompt="描述"/>
                    <a:field name="from_column_value" prompt="变更前"/>
                    <a:field name="to_column_value" prompt="变更后"/>
                </a:fields>
            </a:dataSet>
        </a:dataSets>
        <a:screenBody>
            <a:hBox>
                <a:grid bindTarget="con_contract_lease_ds" height="300" navBar="true" width="600">
                    <a:columns>
                        <a:column name="brand_id_n" align="left" prompt="品牌" width="100"/>
                        <a:column name="model_id_n" align="left" prompt="车型" width="100"/>
                        <a:column name="series_id_n" align="left" prompt="车系" width="100"/>
                        <a:column name="color_of_apprearance" align="left" prompt="颜色" showtitle="false" width="100"/>
                        <a:column name="quantity" align="right" prompt="数量" width="70"/>
                        <a:column name="invoice_price" align="right" prompt="开票价" renderer="Aurora.formatMoney" width="80"/>
                        <a:column name="guide_price" align="right" prompt="指导价" renderer="Aurora.formatMoney" width="80"/>
                        <a:column name="insurance_price" align="right" prompt="保险费" renderer="Aurora.formatMoney" width="80"/>
                        <a:column name="purchase_tax" align="right" prompt="购置税" renderer="Aurora.formatMoney" width="80"/>
                        <a:column name="car_detail" align="center" prompt="车辆明细" renderer="con751_lease_item_detail_renderer" width="80"/>
                    </a:columns>
                </a:grid>
                <a:grid bindTarget="hls_standard_history_lease_ds" height="300" width="610">
                    <a:columns>
                        <a:column name="table_name" prompt="变更内容" width="150"/>
                        <a:column name="prompt" prompt="内容明细" width="150"/>
                        <a:column name="from_column_value" prompt="变更前" width="150"/>
                        <a:column name="to_column_value" prompt="变更后" width="150"/>
                    </a:columns>
                </a:grid>
            </a:hBox>
        </a:screenBody>
    </a:view>
</a:screen>
