<?xml version="1.0" encoding="UTF-8"?>
<bm:model xmlns:ns2="aurora.database.local.oracle" xmlns:f="aurora.database.features" xmlns:bm="http://www.aurora-framework.org/schema/bm">
    <bm:operations>
        <bm:operation name="update">
            <bm:update-sql><![CDATA[
            declare
              v_node_action_id   number;
            begin            
              select 
				  t.node_action_id
				  into v_node_action_id
				 from ZJ_WFL_WORKFLOW_NODE_ACTION t where t.node_id = ${@node_id} and t.action_type = ${@action_type};
            	 ${@result_num} := zj_wfl_core_pkg.workflow_approve(p_rcpt_record_id	=> ${@record_id},
												            		p_node_action_id 	=> v_node_action_id,
												            		p_comment 			=> ${@comment_text_out},
												            		p_comment_text_out  => ${@comment_text_out},
												            		p_user_id 			=> ${/session/@user_id});
			commit;														
    		end;
    		]]></bm:update-sql>
            <bm:parameters>
                <bm:parameter name="result_num" dataType="java.lang.Long" input="false" output="true" outputPath="@result_num"/>
            </bm:parameters>
        </bm:operation>
    </bm:operations>
</bm:model>
