<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: zyx 
    $Date: 2016-10-31 下午3:07:10 
    $Revision: 1.0  
    $Purpose: SAP接口科目属性定义
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application">
    <a:init-procedure/>
    <a:view package="aurora.ui.std" template="default">
        <div/>
        <script><![CDATA[
        	
        	function account_query(){
        		$('gld_account_result').query();
        	}
        	
        	function back(){
        		window.location.href='HLS_SAP9000/hls_sys_sap_accounts_attr.screen'/*$('hls_sys_sap_accounts_attr_link').getUrl()*/;	
        	}
        	function subSuccess(ds,ref){
        		ds.query();
        	}
        ]]></script>
        <a:dataSets>
            <a:dataSet id="gld_account_sets_query" autoCreate="true">
                <a:fields>
                    <a:field name="account_set_code" lovGridHeight="300" lovHeight="430" lovService="sap.gld_account_set_lov" lovWidth="500">
                        <mapping>
                            <map from="account_set_id" to="account_set_id"/>
                            <map from="account_set_code" to="account_set_code"/>
                            <map from="account_set_name" to="account_set_name"/>
                        </mapping>
                    </a:field>
                    <!--                     <a:field name="account_set_code" lovGridHeight="300" lovHeight="430" lovService="sap.gld_account_set_lov" lovWidth="500">
                        <mapping>
                            <map from="account_set_id" to="account_set_id"/>
                            <map from="account_set_code" to="account_set_code"/>
                            <map from="account_set_name" to="account_set_name"/>
                        </mapping>
                    </a:field> -->
                </a:fields>
            </a:dataSet>
            <a:dataSet id="sap_account_type_ds" lookupCode="HLS_SAP_ACCOUNT_TYPE"/>
            <a:dataSet id="dr_account_category_ds" lookupCode="HLS_SAP_DR_ACCOUNT_CATEGORY"/>
            <a:dataSet id="cr_account_category_ds" lookupCode="HLS_SAP_CR_ACCOUNT_CATEGORY"/>
            <a:dataSet id="sap_account_group_ds" lookupCode="HLS_SAP_ACCOUNT_GROUP"/>
            <a:dataSet id="gl_identity_ds" lookupCode="HLS_SAP_GL_IDENTITY"/>
            <a:dataSet id="gld_account_result" autoQuery="true" model="sap.hls_sap_gld_accounts" queryDataSet="gld_account_sets_query" queryUrl="${/request/@context_path}/autocrud/sap.hls_sap_gld_accounts/query?account_set_id=${/parameter/@account_set_id}" selectable="true" submitUrl="hls_sys_sap_account_attr_sets.svc">
                <a:fields>
                    <a:field name="sap_account_type_name" displayField="code_value_name" options="sap_account_type_ds" required="true" returnField="sap_account_type" valueField="code_value"/>
                    <a:field name="dr_account_category_name" displayField="code_value_name" options="dr_account_category_ds" required="true" returnField="dr_account_category" valueField="code_value"/>
                    <a:field name="cr_account_category_name" displayField="code_value_name" options="cr_account_category_ds" required="true" returnField="cr_account_category" valueField="code_value"/>
                    <a:field name="sap_account_group_name" displayField="code_value_name" options="sap_account_group_ds" required="true" returnField="sap_account_group" valueField="code_value"/>
                    <a:field name="gl_identity_name" displayField="code_value_name" options="gl_identity_ds" returnField="gl_identity" valueField="code_value"/>
                    <a:field name="cash_flow_flag" checkedValue="Y" defaultValue="N" unCheckedValue="N"/>
                    <a:field name="trade_partner_flag" checkedValue="Y" defaultValue="N" unCheckedValue="N"/>
                </a:fields>
                <a:events>
                    <a:event name="submitsuccess" handler="subSuccess"/>
                </a:events>
            </a:dataSet>
        </a:dataSets>
        <a:screenBody>
            <a:form column="2" height="100" title="SAP接口科目属性定义" width="600">
                <a:lov name="account_set_code" bindTarget="gld_account_sets_query" prompt="科目表代码"/>
                <a:textField name="account_set_name" bindTarget="gld_account_sets_query" prompt="科目表描述"/>
                <a:textField name="account_code" bindTarget="gld_account_sets_query" prompt="科目代码">
                    <a:events>
                        <a:event name="enterdown" handler="account_query"/>
                    </a:events>
                </a:textField>
                <a:textField name="account_description" bindTarget="gld_account_sets_query" prompt="科目描述">
                    <a:events>
                        <a:event name="enterdown" handler="account_query"/>
                    </a:events>
                </a:textField>
            </a:form>
            <a:hBox>
                <a:button click="account_query" text="HAP_QUERY"/>
            </a:hBox>
            <a:grid id="grid_id" bindTarget="gld_account_result" height="300" navBar="true" width="953">
                <a:toolBar>
                    <a:button type="save"/>
                    <a:button type="clear"/>
                </a:toolBar>
                <a:columns>
                    <a:column name="account_code" prompt="科目代码" sortable="true"/>
                    <a:column name="description" prompt="科目描述" width="250"/>
                    <a:column name="sap_account_type_name" editor="comboEdit" prompt="SAP科目类型" width="80"/>
                    <a:column name="dr_account_category_name" editor="comboEdit" prompt="借方记账号" width="75"/>
                    <a:column name="cr_account_category_name" editor="comboEdit" prompt="贷方记账号" width="75"/>
                    <a:column name="gl_identity_name" editor="comboEdit" prompt="特别总账标识" width="80"/>
                    <a:column name="cash_flow_flag" editor="checkEdit" prompt="现金流量相关" width="75"/>
                    <a:column name="sap_account_group_name" editor="comboEdit" prompt="SAP科目组"/>
                    <a:column name="trade_partner_flag" editor="checkEdit" prompt="贸易伙伴相关" width="75"/>
                </a:columns>
                <a:editors>
                    <a:checkBox id="checkEdit"/>
                    <a:comboBox id="comboEdit"/>
                </a:editors>
            </a:grid>
            <!--  <a:button click="back" text="HAP_BACK"/> -->
        </a:screenBody>
    </a:view>
</a:screen>
