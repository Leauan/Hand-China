<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: qianming 
    $Date: 2015-5-22 下午2:16:35  
    $Revision: 1.0  
    $Purpose: 
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application">
    <a:init-procedure/>
    <a:view>
        <script><![CDATA[
    		function yonda_report_overdue_money_render(value,record,name){
    		    return Aurora.formatMoney(value,2);
    		}
    	]]></script>
        <a:dataSets>
            <a:dataSet id="yonda_report_overdue_v_query_ds" autoCreate="true">
                <a:fields>
                    <a:field name="contract_number" lovGridHeight="300" lovHeight="470" lovService="cont.CON340.con_contract_for_lov" lovWidth="600" title="合同">
                        <a:mapping>
                            <a:map from="contract_id" to="contract_id"/>
                            <a:map from="contract_number" to="contract_number"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="bp_name" lovGridHeight="330" lovHeight="470" lovLabelWidth="120" lovService="cont.CON340.hls_bp_master_v_all_lov?bp_category=TENANT" lovWidth="700" title="承租人">
                        <a:mapping>
                            <a:map from="bp_id" to="bp_id"/>
                            <a:map from="bp_name" to="bp_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="company_short_name" lovGridHeight="330" lovHeight="500" lovService="cont.CON340.fnd_companies_for_lov" lovWidth="620" title="出租方">
                        <a:mapping>
                            <a:map from="company_id" to="company_id"/>
                            <a:map from="company_short_name" to="company_short_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="employee_name" lovGridHeight="300" lovHeight="450" lovService="cont.CON342.exp_employee_assigns_v" lovWidth="600" title="员工">
                        <a:mapping>
                            <a:map from="employee_id" to="employee_id"/>
                            <a:map from="employee_name" to="employee_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="unit_name" lovGridHeight="300" lovHeight="450" lovService="cont.CON340.exp_org_unit_vl" lovWidth="600" title="4s">
                        <a:mapping>
                            <a:map from="unit_id" to="unit_id"/>
                            <a:map from="description" to="unit_name"/>
                        </a:mapping>
                    </a:field>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="yonda_report_overdue_v_result_ds" autoPageSize="true" model="cont.CON342.yonda_report_overdue_v" queryDataSet="yonda_report_overdue_v_query_ds"/>
        </a:dataSets>
        <a:screenBody>
            <a:queryForm id="yonda_report_overdue_v_query_id" bindTarget="yonda_report_overdue_v_query_ds" createSearchButton="true" marginWidth="35" resultTarget="yonda_report_overdue_v_result_ds">
                <a:formToolBar labelWidth="110">
                    <a:lov name="contract_number" prompt="合同编号"/>
                    <a:lov name="bp_name" prompt="承租人"/>
                    <a:lov name="company_short_name" prompt="所属区域公司"/>
                    <a:textField name="employee_name" prompt="区域经理"/>
                </a:formToolBar>
                <a:formBody column="4" labelWidth="122">
                    <a:numberField name="lease_item_amount_from" prompt="融资额从"/>
                    <a:numberField name="lease_item_amount_to" prompt="融资额至"/>
                    <a:numberField name="finance_amount_from" prompt="风险敞口从"/>
                    <a:numberField name="finance_amount_to" prompt="风险敞口至"/>
                    <a:numberField name="overdue_times_from" prompt="逾期期数从"/>
                    <a:numberField name="overdue_times_to" prompt="逾期期数至"/>
                    <a:numberField name="overdue_amount_from" prompt="逾期租金从"/>
                    <a:numberField name="overdue_amount_to" prompt="逾期租金至"/>
                    <a:lov name="unit_name" prompt="4s店"/>
                    <a:numberField name="lease_times" prompt="租赁期数"/>
                    <a:numberField name="total_overdue_day_from" prompt="累计逾期天数从"/>
                    <a:numberField name="total_overdue_day_to" prompt="累计逾期天数至"/>
                </a:formBody>
            </a:queryForm>
            <a:grid id="grid_id" bindTarget="yonda_report_overdue_v_result_ds" marginHeight="100" marginWidth="35" navBar="true" showRowNumber="true">
                <a:toolBar>
                    <a:button type="excel"/>
                    <a:button type="clear"/>
                </a:toolBar>
                <a:columns>
                    <a:column name="contract_number" lock="true" prompt="合同编号" width="140"/>
                    <a:column name="bp_name" lock="true" prompt="承租人" showTitle="true" width="200"/>
                    <a:column name="company_short_name" prompt="所属区域公司" showTitle="true" width="200"/>
                    <a:column name="lease_item_amount" align="right" prompt="融资额" renderer="yonda_report_overdue_money_render" width="100"/>
                    <a:column name="finance_amount" align="right" prompt="风险敞口" renderer="yonda_report_overdue_money_render" width="100"/>
                    <a:column name="lease_times" align="center" prompt="租赁期数" width="60"/>
                    <a:column name="pmt_date" align="center" prompt="租金支付日" width="80"/>
                    <a:column name="unit_name" prompt="4s店" showTitle="true" width="180"/>
                    <a:column name="employee_name" prompt="区域经理" width="100"/>
                    <a:column name="period_times" align="center" prompt="截至今日应还期数" width="100"/>
                    <a:column name="received_times" align="center" prompt="截至今日已还期数" width="100"/>
                    <a:column name="overdue_times" align="center" prompt="逾期期数" width="80"/>
                    <a:column name="overdue_amount" align="right" prompt="逾期租金" renderer="yonda_report_overdue_money_render" width="100"/>
                    <a:column name="overdue_principal" align="right" prompt="逾期本金" renderer="yonda_report_overdue_money_render" width="100"/>
                    <a:column name="overdue_interest" align="right" prompt="逾期利息" renderer="yonda_report_overdue_money_render" width="100"/>
                    <a:column name="total_unreceived_penalty" align="right" prompt="累计未收罚息" renderer="yonda_report_overdue_money_render" width="100"/>
                    <a:column name="total_overdue_day" align="center" prompt="累计逾期天数" width="100"/>
                </a:columns>
            </a:grid>
        </a:screenBody>
    </a:view>
</a:screen>
