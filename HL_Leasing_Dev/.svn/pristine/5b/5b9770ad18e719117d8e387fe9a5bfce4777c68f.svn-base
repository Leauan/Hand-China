<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: Yenick  
    $Date: 2019/01/11
    $Revision: 1.0  
    $Purpose: 
-->
<bm:model xmlns:bm="http://www.aurora-framework.org/schema/bm">
    <bm:operations>
        <!--     <bm:operation name="execute">
            <bm:parameters>
                <bm:parameter name="return_value" dataType="java.lang.String" input="false" inputPath="@return_value" output="true" outputPath="/parameter/@return_value"/>
                <bm:parameter name="company_id" dataType="java.lang.Long" input="true" output="false"/>
                <bm:parameter name="internal_period_num" dataType="java.lang.Long" input="true" output="false"/>
                <bm:parameter name="calc_end_date" dataType="java.util.Date" input="true" output="false"/>
                <bm:parameter name="user_id" dataType="java.lang.Long" input="true" output="false"/>
            </bm:parameters>
            <bm:update-sql><![CDATA[
            	declare
 					v_return_value varchar2(30);
                begin
                	
                    v_return_value := HLS_MONTHEND_PKG.con_finance_income
                    (
                        p_company_id			=>${/session/@company_id},
                        p_internal_period_num	=>${@internal_period_num},
                        p_accounting_date		=>${@calc_end_date},
                        p_user_id				=>${/session/@user_id}
                    );
                   
                    if v_return_value ='SUCCESS' then
                    ${@return_value} := HLS_MONTHEND_PKG.con_finance_income_je
                    (
                        p_company_id			=>${/session/@company_id},
                        p_internal_period_num	=>${@internal_period_num},
                        p_user_id				=>${/session/@user_id}
                    );
                    end if;
                    calc_end_date
                end;]]></bm:update-sql>
        </bm:operation> -->
        <bm:operation name="update">
            <bm:update-sql><![CDATA[
                BEGIN
                    df_monthend_pkg.df_finance_income_je(p_date 		=> to_date(${@calc_end_date},'YYYY-MM'), 
                    										p_user_id 	=> ${/session/@user_id},
                    										p_bp_id =>${@bp_id});
                END;
            ]]></bm:update-sql>
        </bm:operation>
    </bm:operations>
</bm:model>
