<?xml version="1.0" encoding="UTF-8"?>
<bm:model xmlns:f="aurora.database.features" xmlns:bm="http://www.aurora-framework.org/schema/bm" needAccessControl="false">
    <bm:operations>
        <bm:operation name="update">
            <bm:update-sql><![CDATA[
                BEGIN
                    zj_wfl_core_pkg.workflow_commission( p_rcpt_id => ${@record_id},
                                                         p_transfer_to_user_id => ${@transfer_user_id},
                                                         p_transfer_comment => '',
                                                         p_user_id  =>${/session/@user_id});
                    begin
                      insert into ZJ_WFL_NODE_DELIVER(INSTANCE_ID,NODE_ID,RECIPIENT_ID,DELIVER_TO_ID,DELIVER_REASON,WORKFLOW_ID,CREATION_DATE,CREATED_BY,LAST_UPDATE_DATE,LAST_UPDATED_BY)
                      values(${@instance_id},${@node_id},${@user_id},${@transfer_user_id},'',${@workflow_id},sysdate,${/session/@user_id},sysdate,${/session/@user_id});
                    exception
                      when others then
                         null;
                    end;                                     
                END;
            ]]></bm:update-sql>
        </bm:operation>
    </bm:operations>
</bm:model>
