<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: xuls  
    $Date: 2017-1-4 下午03:42:50  
    $Revision: 1.0  
    $Purpose: 
-->
<bm:model xmlns:bm="http://www.aurora-framework.org/schema/bm">
    <bm:operations>
        <bm:operation name="query">
            <bm:query-sql><![CDATA[
                SELECT
                    v.*
                FROM
                    (SELECT
                        --  rank() over(order by cl.contract_number) rk,
                        cl.contract_number,
                        cl.bp_tenant_name,
                        cl.actual_amount,
						cl.payment_req_id,
                        -- cl.bp_bank_account_name,
                        --cl.bp_bank_account_num,
                        --cl.bank_full_name1,
                        (
                        SELECT
                            a.bp_bank_account_name
                        FROM
                            CSH_PAYMENT_REQ_HD a
                        WHERE
                            a.payment_req_id = cl.payment_req_id
                        ) bp_bank_account_name,
                        (SELECT
                            a.bp_bank_account_num
                        FROM
                            CSH_PAYMENT_REQ_HD a
                        WHERE
                            a.payment_req_id = cl.payment_req_id
                        ) bp_bank_account_num,
                        (SELECT
                            a.bank_full_name
                        FROM
                            CSH_PAYMENT_REQ_HD a
                        WHERE
                            a.payment_req_id = cl.payment_req_id
                        ) bank_full_name1,
                        --add
                        to_char(cl.due_date,'yyyy-mm-dd')  due_date
                    FROM
                        csh_payment_req_debt_ln_lv cl
                    WHERE
                        cl.payment_req_id IN (${:@payment_req_id})
                    ) v #WHERE_CLAUSE#
                    -- ORDER BY
                    --    v.rk
            ]]></bm:query-sql>
        </bm:operation>
    </bm:operations>
</bm:model>
